<!DOCTYPE html>
<html>
<head>
<style>
body{
	width: 100%;
	height: 100%;
	overflow: hidden;
	background-color: #777;
}
.domino {
	position: relative;
    border: 4px solid #000;
    border-radius: 10px;
    background-color: #fff;
/*
	-webkit-animation: spin 6s linear 0s infinite normal;
	-moz-animation: spin 6s linear 0s infinite normal;
	-ms-animation: spin 6s linear 0s infinite normal;
	-o-animation: spin 6s linear 0s infinite normal;
	animation: spin 6s linear 0s infinite normal;
*/
}
@keyframes spin {
  0% { transform: rotate(360deg); }
  100% { transform: rotate(0deg); }
}
@-webkit-keyframes spin {
  0% {-webkit-transform: rotate(90deg); }
  100% { -webkit-transform: rotate(0deg); }
}
@-ms-keyframes spin {
  0% {-ms-transform: rotate(360deg); }
  100% { -ms-transform: rotate(0deg); }
}
@-moz-keyframes spin {
  0% { -moz-transform: rotate(360deg); }
  100% { -moz-transform: rotate(0deg); }
}
@-o-keyframes spin {
  0% { -o-transform: rotate(360deg); }
  100% { -o-transform: rotate(0deg); }
}
/*
#divider{
	position: absolute;
	background-color: #000;
}
*/

.circle {
    height: 20px;
    width: 20px;
    /* margin: 8px; */
    border-radius:20px;
    background-color: #000;
}
</style>
</head>
<body>

<!--
<div id="domino">
	<div id="dots1"></div>
	<div id="dots2"></div>
</div>
-->
<div id="stage">
</div>


<script type="text/javascript">

	/*
document.getElementById("domino").style.width = "100px";
	document.getElementById("domino").style.height = "200px";
*/
	
	/*
document.getElementById("divider").style.width = "98px";
	document.getElementById("divider").style.height = "2px";
	document.getElementById("divider").style.top = "100px";
*/
	
	/*
document.getElementById("dots1").style.width = "100px";
	document.getElementById("dots1").style.height = "100px";
	document.getElementById("dots1").style.borderBottom = "thin solid #0000FF";
	
	document.getElementById("dots2").style.width = "100px";
	document.getElementById("dots2").style.height = "100px";
	document.getElementById("dots2").style.borderTop = "thin solid #0000FF";
	
	addDots("dots1");
	addDots("dots2");
*/
	
	
	
	//Domino face class
	function DominoFace(elemPos){
		this.face = document.createElement("div");
		this.face.style.width = "100px";
		this.face.style.height = "100px";
		this.face.style.position = "relative";
		if(elemPos == "top"){
			this.face.style.borderBottom = "thin solid #000";
		}else{
			this.face.style.borderTop = "thin solid #000";
		}
		this.refresh();
		return this;
	}
	
	DominoFace.prototype.getDisplay = function(){
		return this.face;
	}
	
	DominoFace.prototype.refresh = function(){
		var num = Math.floor(Math.random() * 7);
		var myNode = this.face;
		while (myNode.firstChild) {
		    myNode.removeChild(myNode.firstChild);
		}
		switch(num){
			case 0:
			break;
			case 1:
				/*
var oneDot = document.createElement("div");
				oneDot.setAttribute("class", "circle");
				this.face.appendChild(oneDot);
				oneDot.style.position = "relative";
				oneDot.style.top = (parseInt(this.face.style.height) - 10)/2 - 4 + "px";
				oneDot.style.left = (parseInt(this.face.style.width) - 10)/2 - 4 + "px";
*/
				
				createDot(this.face, (parseInt(this.face.style.width) - 10)/2 - 4, (parseInt(this.face.style.height) - 10)/2 - 4);
				break;
			case 2:
				/*
var oneDot = document.createElement("div");
				oneDot.setAttribute("class", "circle");
				this.face.appendChild(oneDot);
				oneDot.style.position = "relative";
				oneDot.style.left = (parseInt(this.face.style.width) - 20 - 8) + "px";
				oneDot.style.top = "8px";
*/
				
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), 8);
				
				
				/*
var twoDot = document.createElement("div");
				twoDot.setAttribute("class", "circle");
				this.face.appendChild(twoDot);
				twoDot.style.position = "relative";
				twoDot.style.left = "8px";
				twoDot.style.top = (parseInt(this.face.style.height) - 48 - 4) + "px";
*/
				
				createDot(this.face, 8, (parseInt(this.face.style.height) - 20 - 8));
				
				break;
			case 3:
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), 8);
				createDot(this.face, (parseInt(this.face.style.width)- 20)/2, (parseInt(this.face.style.height) - 20)/2);
				createDot(this.face, 8, (parseInt(this.face.style.height) - 20 - 8));
			break;
			case 4:
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), 8);
				createDot(this.face, 8, 8);
				
				createDot(this.face, 8, (parseInt(this.face.style.height) - 20 - 8));
				createDot(this.face, (parseInt(this.face.style.height) - 20 - 8), (parseInt(this.face.style.height) - 20 - 8));
			break;
			case 5:
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), 8);
				createDot(this.face, 8, 8);
				createDot(this.face, (parseInt(this.face.style.width)- 20)/2, (parseInt(this.face.style.height) - 20)/2);
				createDot(this.face, 8, (parseInt(this.face.style.height) - 20 - 8));
				createDot(this.face, (parseInt(this.face.style.height) - 20 - 8), (parseInt(this.face.style.height) - 20 - 8));
			break;
			case 6:
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), 8);
				createDot(this.face, 8, 8);
				
				createDot(this.face, (parseInt(this.face.style.width) - 20 - 8), (parseInt(this.face.style.width)- 20)/2);
				createDot(this.face, 8, (parseInt(this.face.style.width)- 20)/2);
				
				createDot(this.face, 8, (parseInt(this.face.style.height) - 20 - 8));
				createDot(this.face, (parseInt(this.face.style.height) - 20 - 8), (parseInt(this.face.style.height) - 20 - 8));
			break;
		}
	};
	
	function createDot(parent, leftPos, topPos){
		var dot = document.createElement("div");
		dot.setAttribute("class", "circle");
		parent.appendChild(dot);
		dot.style.position = "absolute";
		dot.style.left = leftPos + "px";
		dot.style.top = topPos + "px";
		/*
dot.style.left = leftPos + "px";
		dot.style.top = topPos + "px";
*/
	}
	
	
	//Domino class
	function Domino(){
		this.domino = document.createElement("div");
		this.domino.style.width = "100px";
		this.domino.style.height = "200px";
		this.domino.className = "domino";
		
		this.domino.face1 = new DominoFace("top");
		this.domino.face2 = new DominoFace();
		this.domino.appendChild(this.domino.face1.getDisplay());
		this.domino.appendChild(this.domino.face2.getDisplay());
		this.domino.onclick = function(){
			this.face1.refresh();
			this.face2.refresh();
		}
		return this;
	}
	
	Domino.prototype.getDisplay = function(){
		return this.domino;
	}
	
	Domino.prototype.resize = function(){
		//this.domino.width
	}
	
	var counter_clockwiseBtn = createButton("counter_clockwise");
	document.getElementById("stage").appendChild(counter_clockwiseBtn);
	counter_clockwiseBtn.addEventListener("click", function(){rotate("counter_clockwise")});
	
	var clockwiseBtn = createButton("clockwise");
	document.getElementById("stage").appendChild(clockwiseBtn);
	clockwiseBtn.addEventListener("click", function(){rotate("clockwise")});
	
	
	var domino = new Domino();
	document.getElementById("stage").appendChild(domino.getDisplay());
	
	window.addEventListener("resize", onWindowResize);
	
	function createButton(value){
		var btn = document.createElement("input");
		btn.setAttribute("type", "button");
		btn.setAttribute("value", value);
		return btn;
	}
	
	function rotate(direction){
		//Detects browser prefix - copied from http://davidwalsh.name/vendor-prefix
		
		var styles = window.getComputedStyle(document.documentElement, '');
		var cssPrefix = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];
		if(cssPrefix) {
			domino.rotate = domino.rotate || 0;
			if(direction != "clockwise"){
				domino.rotate += -90;
			}else{
				domino.rotate += 90;
			}
			domino.rotate %= 360;
			var patt = /rotate\(-?\d+deg\)/ig;
			
			domino.getDisplay().style.webkitTransform = (domino.getDisplay().style.webkitTransform + "").replace(patt, "") + "rotate(" + domino.rotate + "deg)";
			domino.getDisplay().style.msTransform = (domino.getDisplay().style.msTransform + "").replace(patt, "") + "rotate(" + domino.rotate + "deg)";
			domino.getDisplay().style.MozTransform = (domino.getDisplay().style.MozTransform + "").replace(patt, "") + "rotate(" + domino.rotate + "deg)";
			domino.getDisplay().style.OTransform = (domino.getDisplay().style.OTransform + "").replace(patt, "") + "rotate(" + domino.rotate + "deg)";
			domino.getDisplay().style.transform = (domino.getDisplay().style.transform + "").replace(patt, "") + "rotate(" + domino.rotate + "deg)";
			
			
			//domino.getDisplay().style.removeProperty("-" + cssPrefix + "-transform");
			/* domino.getDisplay().setAttribute("style","width: 100px; height: 200px;" +  "-" + cssPrefix + "-transform:rotate(" + domino.rotate + "deg);" + "-" + cssPrefix + "-transform:scale(" + 2 + ", " + 2 + ")"); */
			//domino.getDisplay().setAttribute("style", domino.getDisplay().getAttribute("style") +  "-" + cssPrefix + "-transform:rotate(" + domino.rotate + "deg);");
			
			/*
domino.getDisplay().setAttribute("style", domino.getDisplay().getAttribute("style") +  "-" + cssPrefix + "-transform:rotate(" + domino.rotate + "deg)" +  " " + "scale(" + 2 + ", " + 2 + ");");
			
			// + "-" + cssPrefix + "-transform:scale(" + 2 + ", " + 2 + ")"
			alert(window.getComputedStyle(domino.getDisplay(), null).getPropertyValue("-webkit-transform"));
*/
		}
	}
	scale();
	
	function onWindowResize(){
		scale();
	}
	function scale(){
		var patt = /scale\(-?\d*.?\d+(, -?\d*.?\d+)?\)/ig;
		var boxDim = 0;
		var scale = 1;
		if(window.innerHeight > window.innerWidth){
			boxDim = window.innerWidth/2;
		}else{
			boxDim = window.innerHeight/2;
		}
		if(domino.getDisplay().style.width > domino.getDisplay().style.height){
			scale = boxDim/parseInt(domino.getDisplay().style.width);
		}else{
			scale = boxDim/parseInt(domino.getDisplay().style.height);
		}
		
		domino.getDisplay().style.webkitTransform = (domino.getDisplay().style.webkitTransform + "").replace(patt, "") + "scale(" + scale + ", " + scale + ")";
		domino.getDisplay().style.msTransform = (domino.getDisplay().style.msTransform + "").replace(patt, "") + "scale(" + scale + ", " + scale + ")";
		domino.getDisplay().style.MozTransform = (domino.getDisplay().style.MozTransform + "").replace(patt, "") + "scale(" + scale + ", " + scale + ")";
		domino.getDisplay().style.OTransform = (domino.getDisplay().style.OTransform + "").replace(patt, "") + "scale(" + scale + ", " + scale + ")";
		domino.getDisplay().style.transform = (domino.getDisplay().style.transform + "").replace(patt, "") + "scale(" + scale + ", " + scale + ")";
		
		domino.getDisplay().style.left = (window.innerWidth - parseInt(domino.getDisplay().style.width) * scale)/2 + "px";
		domino.getDisplay().style.top = (window.innerHeight - parseInt(domino.getDisplay().style.height) * scale)/2 + "px";
	}
	
</script>

</body>
</html>